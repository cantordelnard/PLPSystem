{% extends "base.html" %}

<!-- =============== Title ================ -->
{% block title %}TEST PAGE{% endblock %}

<!-- =============== Sidebars ================ -->
{% block sidebar %}
<li class="active">
    <a href="#">
        <span class="icon">
            <ion-icon name="grid-outline"></ion-icon>
        </span>
        <span class="title">DELNARD</span>
    </a>
</li>
<li>
    <a href="#">
        <span class="icon">
            <ion-icon name="cog-outline"></ion-icon>
        </span>
        <span class="title">KYLLE JASPER</span>
    </a>
</li>
<li>
    <a href="#">
        <span class="icon">
            <ion-icon name="person-outline"></ion-icon>
        </span>
        <span class="title">JOHN PAUL</span>
    </a>
</li>
{% endblock %}

<!-- =============== Main Content ================ -->
{% block main %}
<div class="content">
    <div class="studentHome">
        <div class="studentHome">
            <!-- Notification Icon Section -->
            <div class="notification-container">
              <div class="notification-icon" id="notification-icon">
                    <ion-icon name="notifications-outline"></ion-icon>
                </div>
            </div>
    
            <!-- Modal for displaying interventions -->
          <div id="interventions-modal" class="modal">
             <div class="modal-content">
             <span class="close-button" id="close-button">&times;</span>
             <h2>Notifications</h2>
             <div id="interventions-list"></div>
           </div>
          </div>

        <div class="plpBldg">
            
        </div>
        <div class="marquee">
            <ul class="marquee-content">
                <li><img src="static/images/PLP.svg" alt="Image 1"></li>
                <li><img src="static/images/CAS.svg" alt="Image 2"></li>
                <li><img src="static/images/CBA.svg" alt="Image 3"></li>
                <li><img src="static/images/CIHM.svg" alt="Image 4"></li>
                <li><img src="static/images/COE.svg" alt="Image 5"></li>
                <li><img src="static/images/COEd.svg" alt="Image 6"></li>
                <li><img src="static/images/CONursing.svg" alt="Image 7"></li>
                <li><img src="static/images/CSS.svg" alt="Image 8"></li>
                <li><img src="static/images/PASIG.svg" alt="Image 9"></li>
            </ul>
        </div>
    </div>
</div>


<!-- Add your CSS and JS -->
<style>
    .notification-container {
        position: absolute;
        top: 10px;
        right: 20px;
    }
    
    .notification-icon {
        position: relative;
        font-size: 30px;
        color: #333;
    }
  
    .notification-icon .badge {
        position: absolute;
        top: -5px;
        right: -10px;
        background-color: red;
        color: white;
        border-radius: 50%;
        padding: 5px 8px;
        font-size: 14px;
    }
  
  .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }
  
  .modal-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width: 80%; /* Could be more or less, depending on screen size */
  }
  
  .close-button {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
  }
  
  .close-button:hover,
  .close-button:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
  }
  
    
  </style>
  
  <script>
  document.getElementById('notification-icon').addEventListener('click', function() {
      // Display the modal
      document.getElementById('interventions-modal').style.display = 'block';
  
      // Fetch data from the server
      fetch('/get-interventions')
          .then(response => response.json())
          .then(data => {
              // Process and display the data in the modal
              const listContainer = document.getElementById('interventions-list');
              listContainer.innerHTML = ''; // Clear existing content
  
              data.forEach(intervention => {
                  const item = document.createElement('div');
                  item.classList.add('intervention-item');
                  item.innerHTML = `
                      <h3>${intervention.Title}</h3>
                      <p>${intervention.Description}</p>
                      <img src="${intervention.Picture}" alt="${intervention.Title}" />
                      <p>Location: ${intervention.Location}</p>
                      <p>Date: ${intervention.Date}</p>
                      <p>Time: ${intervention.Time}</p>
                  `;
                  listContainer.appendChild(item);
              });
          })
          .catch(error => console.error('Error fetching data:', error));
  });
  
  // Close the modal when the user clicks on the close button
  document.getElementById('close-button').addEventListener('click', function() {
      document.getElementById('interventions-modal').style.display = 'none';
  });
  
  // Close the modal when the user clicks outside of the modal content
  window.addEventListener('click', function(event) {
      if (event.target === document.getElementById('interventions-modal')) {
          document.getElementById('interventions-modal').style.display = 'none';
      }
  });
  
  </script>
  
{% endblock %}