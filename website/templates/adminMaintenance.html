{% extends "base.html" %}

<!-- =============== Title ================ -->
{% block title %}Admin | Maintenance{% endblock %}

<!-- =============== Sidebars ================ -->
{% block sidebar %}
<li>
    <a href="admin">
        <span class="icon">
            <ion-icon name="grid-outline"></ion-icon>
        </span>
        <span class="title">DASHBOARD</span>
    </a>
</li>
<li class="active">
    <a href="adminMaintenance">
        <span class="icon">
            <ion-icon name="cog-outline"></ion-icon>
        </span>
        <span class="title">MAINTENANCE</span>
    </a>
</li>
<li>
    <a href="adminUser">
        <span class="icon">
            <ion-icon name="person-outline"></ion-icon>
        </span>
        <span class="title">USERS</span>
    </a>
</li>
<li>
    <a href="adminPrediction">
        <span class="icon">
            <ion-icon name="sparkles-outline"></ion-icon>
        </span>
        <span class="title">PREDICTIVE</span>
    </a>
  </li>
<li>
    <a href="adminUpload">
        <span class="icon">
            <ion-icon name="cloud-upload-outline"></ion-icon>
        </span>
        <span class="title">UPLOAD</span>
    </a>
</li>
<li>
    <a href="adminArchive">
        <span class="icon">
            <ion-icon name="archive-outline"></ion-icon>
        </span>
        <span class="title">ARCHIVE</span>
    </a>
</li>
{% endblock %}


<!-- =============== Flash Message ================ -->
{% block popupmessage %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div id="flash-message" class="info">
    <div class="info__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
            <path fill="#393a37"
                d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
            </path>
        </svg>
    </div>
    <div class="info__title">{{ message }}</div>
    <div class="info__close"><svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
            <path
                d="m15.8333 5.34166-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z"
                fill="#393a37"></path>
        </svg></div>
</div>
{% endfor %}
{% endif %}
{% endwith %}
{% endblock %}


<!-- =============== Main Content ================ -->

{% block main %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
<div class="content">
    <!-- =============== Tab Bar ================ -->
    <div class="tabBar">
        <div class="radio-inputs-1">
            <label class="radio">
                <input type="radio" name="radio" checked="" />
                <span class="name">SCHOOL_YEAR</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">PROGRAM</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">SPECIALIZATION</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">SUBJECT</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">CLASSES</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">PROFESSOR_ADVISORY</span>
            </label>
            <label class="radio">
                <input type="radio" name="radio" />
                <span class="name">EVENTS</span>
            </label>
        </div>
    </div>

    <!-- =============== Tab Bar Content ================ -->
    <div class="content-info">
        <!-- ------ Admin Content ------ -->
        <!-- School Year Content -->
        <div class="school_year">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>SCHOOL YEAR LIST</h2>
                        <input class="inputSeacrh" type="text" id="schoolyearSearchInput"
                            onkeyup="searchFunction('schoolyearSearchInput', 'schoolyearTable')"
                            placeholder="Search School Year">
                    </div>
                    <div class="tbl-content">
                        <table id="schoolyearTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="500px">SCHOOL YEAR ID</th>
                                    <th width="500px">YEAR</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for year in schoolyear %}
                                {% if year.SchoolYearID != 0 %}  <!-- Condition to check if SchoolYearID is not 0 -->
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ year.SchoolYearID }}</td>
                                    <td class="centerUpdate">{{ year.Year }}</td>
                                    <td class="small-width centerUpdate">
                                        <a
                                            href="{{ url_for('views.update_school_year', form_type='school_year', id=year.SchoolYearID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW SCHOOL YEAR</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="school_year">
                            <div class="input-group">
                                <label class="label">School Year ID:</label>
                                <input autocomplete="off" type="text" id="schoolyearid" name="schoolyearid"
                                    placeholder="Enter school year ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Year:</label>
                                <input autocomplete="off" type="text" id="year" name="year" placeholder="Enter year"
                                    class="input" required>
                            </div>
                            <button type="submit" class="btn">Add School Year</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <!-- ------ Admin Content ------ -->
        <div class="program">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>PROGRAM LIST</h2>
                        <input class="inputSeacrh" type="text" id="programSearchInput"
                            onkeyup="searchFunction('programSearchInput', 'programTable')" placeholder="Search Program">
                    </div>
                    <div class="tbl-content">
                        <table id="programTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="125px">PROGRAM ID</th>
                                    <th width="825px">PROGRAM NAME</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for program in program %}
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ program.ProgramID }}</td>
                                    <td>{{ program.ProgramName }}</td>
                                    <td class="small-width centerUpdate">
                                        <a
                                            href="{{ url_for('views.update_program', form_type='program', id=program.ProgramID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW PROGRAM</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="program">
                            <div class="input-group">
                                <label class="label">Program ID:</label>
                                <input autocomplete="off" type="number" id="program_id" name="program_id"
                                    placeholder="Enter program ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Program Name:</label>
                                <input autocomplete="off" type="text" id="program_name" name="program_name"
                                    placeholder="Enter program name" class="input" required>
                            </div>
                            <button type="submit" class="btn">Add Program</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- ------ Admin Content ------ -->
        <div class="specialization">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>SPECIALIZATION LIST</h2>
                        <input class="inputSeacrh" type="text" id="specializationSearchInput"
                            onkeyup="searchFunction('specializationSearchInput', 'specializationTable')"
                            placeholder="Search Specialization">
                    </div>
                    <div class="tbl-content">
                        <table id="specializationTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="150px">SPECIALIZATION ID</th>
                                    <th width="425px">SPECIALIZATION NAME</th>
                                    <th width="425px">PROGRAM NAME</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for specialization in specialization %}
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ specialization.SpecializationID }}</td>
                                    <td>{{ specialization.SpecializationName }}</td>
                                    <td>{{ specialization.ProgramName }}</td>
                                    <td class="small-width centerUpdate">
                                        <a
                                            href="{{ url_for('views.update_specialization', form_type='specialization', id=specialization.SpecializationID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW SPECIALIZATION</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="specialization">
                            <div class="input-group">
                                <label class="label">Specialization ID:</label>
                                <input autocomplete="off" type="number" id="specialization_id" name="specialization_id"
                                    placeholder="Enter specialization ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Specialization Name:</label>
                                <input autocomplete="off" type="text" id="specialization_name"
                                    name="specialization_name" placeholder="Enter specialization name" class="input"
                                    required>
                            </div>
                            <div class="input-group">
                                <label class="label">Program Name:</label>
                                <select id="program_name" name="program_name" class="input" required>
                                    <option value="">Choose program</option>
                                    {% for program in program %}
                                    <option value="{{ program.ProgramID }}">{{ program.ProgramName }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <button type="submit" class="btn">Add Specialization</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subject Content -->
        <div class="subject">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>SUBJECT LIST</h2>
                        <input class="inputSeacrh" type="text" id="subjectSearchInput"
                            onkeyup="searchFunction('subjectSearchInput', 'subjectTable')" placeholder="Search Subject">
                    </div>
                    <div class="tbl-content">
                        <table id="subjectTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="100px">SUBJECT ID</th>
                                    <th width="400px">SUBJECT NAME</th>
                                    <th width="100px">UNITS</th>
                                    <th width="400px">PROGRAM NAME</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for subject in subject %}
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ subject.SubjectID }}</td>
                                    <td>{{ subject.SubjectName }}</td>
                                    <td class="centerUpdate">{{ subject.Units }}</td>
                                    <td>{{ subject.ProgramName }}</td>
                                    <td class="small-width centerUpdate">
                                        <a href="{{ url_for('views.update_subject', subject_id=subject.SubjectID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW SUBJECT</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="subject">
                            <div class="input-group">
                                <label class="label">Subject ID:</label>
                                <input autocomplete="off" type="text" id="subject_id" name="subject_id"
                                    placeholder="Enter subject ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Subject Name:</label>
                                <input autocomplete="off" type="text" id="subject_name" name="subject_name"
                                    placeholder="Enter subject name" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Units:</label>
                                <input autocomplete="off" type="number" id="subject_units" name="subject_units"
                                    placeholder="Enter units" class="input" required>
                            </div>

                            <div class="input-group">
                                <label class="label">Program Name:</label>
                                <select id="subject_program_name" name="subject_program_name" class="input" required>
                                    <option value="">Choose program</option>
                                    {% for program in program %}
                                    <option value="{{ program.ProgramID }}">{{ program.ProgramName }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <button type="submit" class="btn">Add Subject</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Classes Content -->
        <div class="classes">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>CLASS LIST</h2>
                        <input class="inputSeacrh" type="text" id="classesSearchInput"
                            onkeyup="searchFunction('classesSearchInput', 'classesTable')" placeholder="Search Classes">
                    </div>
                    <div class="tbl-content">
                        <table id="classesTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="100px">CLASS ID</th>
                                    <th width="725px">CLASS NAME</th>
                                    <th width="225px">YEAR</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for class in classes %}
                                {% if class.ClassID != 0 %}  <!-- Condition to check if ClassID is not 0 -->
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ class.ClassID }}</td>
                                    <td class="centerUpdate">{{ class.ClassName }}</td>
                                    <td class="centerUpdate">{{ class.Year }}</td>
                                    <td class="small-width centerUpdate">
                                        <a
                                            href="{{ url_for('views.update_class', form_type='class', id=class.ClassID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW CLASS</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="class">
                            <div class="input-group">
                                <label class="label">Class ID:</label>
                                <input autocomplete="off" type="text" id="class_id" name="class_id"
                                    placeholder="Enter class ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Class Name:</label>
                                <input autocomplete="off" type="text" id="class_name" name="class_name"
                                    placeholder="Enter class name" class="input" required>
                            </div>

                            <div class="input-group">
                                <label class="label">School Year:</label>
                                <select id="class_year" name="class_year" class="input" required>
                                    <option value="">Choose year</option>
                                    {% for year in schoolyear %}
                                    <option value="{{ year.SchoolYearID }}">{{ year.Year }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <button type="submit" class="btn">Add Class</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Professor Advisory Content -->
        <div class="professor_advisory">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>PROFESSOR ADVISORY LIST</h2>
                        <input class="inputSeacrh" type="text" id="professoradvisorySearchInput"
                            onkeyup="searchFunction('professoradvisorySearchInput', 'professoradvisoryTable')"
                            placeholder="Search Professor Advisory">
                    </div>
                    <div class="tbl-content">
                        <table id="professoradvisoryTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="125px">ADVISORY ID</th>
                                    <th width="400px">PROFESSOR NAME</th>
                                    <th width="125px">CLASS NAME</th>
                                    <th width="225px">SUBJECT NAME</th>
                                    <th width="125px">SEMESTER</th>
                                    <th>ACTION</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for professoradvisory in professoradvisory %}
                                <tr class="highlight-row">
                                    <td class="centerUpdate">{{ professoradvisory.AdvisoryID }}</td>
                                    <td>{{ professoradvisory.FirstName }} {{ professoradvisory.LastName }}</td>
                                    <td class="centerUpdate">{{ professoradvisory.ClassName }}</td>
                                    <td class="centerUpdate">{{ professoradvisory.SubjectName }}</td>
                                    <td class="centerUpdate">{{ professoradvisory.SemesterName }}</td>
                                    <td class="small-width centerUpdate">
                                        <a
                                            href="{{ url_for('views.update_professoradvisory', id=professoradvisory.AdvisoryID) }}">
                                            <ion-icon name="create" class="updateIcon"></ion-icon>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD NEW PROFESSOR ADVISORY</h2>
                    </div>
                    <div class="inputData">
                        <form method="post" action="{{ url_for('views.adminMaintenance') }}">
                            <input type="hidden" name="form_type" value="professor_advisory">
                            <div class="input-group">
                                <label class="label">Advisory ID:</label>
                                <input autocomplete="off" type="text" id="advisory_id" name="advisory_id"
                                    placeholder="Enter advisory ID" class="input" required>
                            </div>
                            <div class="input-group">
                                <label class="label">Professor Name:</label>
                                <select id="professor_id" name="professor_id" class="input" required>
                                    <option value="">Choose professor</option>
                                    {% for professor in professors %}
                                    <option value="{{ professor.ProfessorID }}">{{ professor.FirstName }} {{
                                        professor.LastName }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="label">Class Name:</label>
                                <select id="class_id" name="class_id" class="input" required>
                                    <option value="">Choose class</option>
                                    {% for _class in classes %}
                                    <option value="{{ _class.ClassID }}">{{ _class.ClassName }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="label">Subject Name:</label>
                                <select id="subject_id" name="subject_id" class="input" required>
                                    <option value="">Choose subject</option>
                                    {% for subject in subject %}
                                    <option value="{{ subject.SubjectID }}">{{ subject.SubjectName }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="label">Semester:</label>
                                <select id="semester_id" name="semester_id" class="input" required>
                                    <option value="">Choose semester</option>
                                    {% for semester in semesters %}
                                    <option value="{{ semester.SemesterID }}">{{ semester.SemesterName }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <button type="submit" class="btn">Add Professor Advisory</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Events Content -->
        <div class="events">
            <div class="details">
                <!-- LIST -->
                <div class="list">
                    <div class="cardHeader">
                        <h2>EVENTS LIST</h2>
                        <input class="inputSeacrh" type="text" id="events"
                            onkeyup="searchFunction('events', 'interventionsTable')" placeholder="Search Events">
                    </div>
                    <div class="tbl-content">
                        <table id="interventionsTable" class="interventionsTable">
                            <thead>
                                <tr class="bgTr">
                                    <th width="125px">TITLE</th>
                                    <th width="825px">DESCRIPTION</th>
                                    <th width="825px">LOCATION</th>
                                    <th width="825px">DATE</th>
                                    <th width="825px">TIME</th>
                                    <th width="825px">PICTURE</th>
                                    <th>ACTIONS</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Content will be injected here via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD -->
                <div class="newData">
                    <div class="cardHeader">
                        <h2>ADD EVENTS</h2>
                    </div>
                    <div class="inputData">
                        <form action="{{ url_for('views.add_intervention') }}" method="POST"
                            enctype="multipart/form-data" class="formContainerEvent">

                            <!-- Title Field -->
                            <div class="input-group">
                                <label for="title" class="label">Title</label>
                                <input type="text" id="title" name="title" placeholder="Enter event title"
                                    class="inputEvent" required>
                            </div>

                            <!-- Description Field -->
                            <div class="input-group">
                                <label for="description" class="label">Description</label>
                                <textarea id="description" name="description" placeholder="Enter event description"
                                    class="textareaEvent" required></textarea>
                            </div>

                            <div class="input-group">
                                <label for="factor_id" class="label">Event Type</label>
                                <select id="factor_id" name="factor_id" class="inputEvent" required>
                                    <option value="1">Socioeconomic</option>
                                    <option value="3">Behavioral</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>


                            <!-- Link Field -->
                            <div class="input-group">
                                <label for="link" class="label">Link</label>
                                <textarea id="link" name="link" placeholder="Enter Link" class="textareaEvent"
                                    required></textarea>
                            </div>

                            <!-- Picture Upload Field -->
                            <div class="input-group">
                                <label for="picture" class="label">Upload Picture</label>
                                <input type="file" id="fileEvent" name="picture" accept="image/*" class="inputFileEvent"
                                    required>
                            </div>

                            <!-- Location Field -->
                            <div class="input-group">
                                <label for="location" class="label">Location</label>
                                <input type="text" id="location" name="location" placeholder="Enter event location"
                                    class="inputEvent" required>
                            </div>

                            <!-- Date Field -->
                            <div class="input-group">
                                <label for="date" class="label">Date</label>
                                <input type="date" id="date" name="date" class="inputEvent" required>
                            </div>

                            <!-- Time Field -->
                            <div class="input-group">
                                <label for="time" class="label">Time</label>
                                <input type="time" id="time" name="time" class="inputEvent" required>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit" class="btn">Add Event</button>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
</div>
</div>
<script>

    function searchFunction(inputId, tableId) {
        var input, filter, table, tr, td, i, j, txtValue;
        input = document.getElementById(inputId);
        filter = input.value.toUpperCase();
        table = document.getElementById(tableId);
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) { // Start from 1 to skip the header row
            tr[i].style.display = "none"; // Initially hide the row
            td = tr[i].getElementsByTagName("td"); // Get all td elements in the row
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText; // Get text content
                    // Check if the input matches the current cell's text
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = ""; // Show the row if a match is found
                        break; // Exit the loop if a match is found
                    }
                }
            }
        }
    }

    function updateIntervention(interventionId) {
        // Redirect to the update page with the intervention ID
        window.location.href = `/update-intervention/${interventionId}`;
    }


    // Fetch interventions and populate the table
    function fetchInterventions() {
        fetch('/get-interventions')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.querySelector('#interventionsTable tbody');
                tableBody.innerHTML = ''; // Clear previous content

                data.forEach(event => {
                    if (event.EventID !== 0 && event.EventID !== 1) { // Check if EventID is not 0
                        const row = document.createElement('tr');
                        row.innerHTML = `
                        <td class="centerUpdate">${event.Title}</td>
                        <td class="centerUpdate">${event.Description}</td>
                        <td class="centerUpdate">${event.Location}</td>
                        <td class="centerUpdate">${event.Date}</td>
                        <td class="centerUpdate">${event.Time}</td>
                        <td class="centerUpdate"><img src="${event.ImagePath}" alt="Event Picture" style="width: 100px; height: auto"></td>
                        <td class="small-width centerUpdateEvent">
                            <ion-icon name="create" class="updateIconEvent" onclick="updateEvent(${event.EventID})"></ion-icon>
                            <ion-icon name="archive" class="archiveIconEvent" onclick="deleteEvent(${event.EventID})"></ion-icon>
                        </td>
                    `;
                        tableBody.appendChild(row);
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching events:', error);
            });
    }

    // Function to delete an event
    function deleteEvent(eventId) {
        if (confirm('Are you sure you want to delete this event?')) {
            fetch(`/delete-event/${eventId}`, {
                method: 'DELETE',
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert(data.message);
                        fetchInterventions(); // Refresh the table after deletion
                    } else {
                        alert('Error deleting event.');
                    }
                })
                .catch(error => {
                    console.error('Error deleting event:', error);
                });
        }
    }

    function updateEvent(eventID) {
        // Navigate to the update page for the specified event
        window.location.href = `/update-event/${eventID}`;
    }

    // Call the function to fetch and display interventions when the page loads
    document.addEventListener('DOMContentLoaded', fetchInterventions);
</script>
{% endblock %}